   <!DOCTYPE html><html>
    <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NHCJY83598"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-NHCJY83598');
    </script>
       <title>R科學-資訊圖表中心(伺服器穩定度)</title>
       <meta name="description" content="R科學，本網站旨在將Ragnarok Online的各種數據以圖像化呈現。">
       <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
       <meta charset="utf-8">
       <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <link rel="shortcut icon" href="Assets/image/favicon.png" type="image/x-icon">
       <link rel="stylesheet" href="Assets/Content/bootstrap.css">
       <link rel="stylesheet" href="Assets/Content/index.css">
       <link rel="stylesheet" href="Assets/Content/font-awesome.css">
       <script src="Assets/javascript/jquery.min.js"></script>  
       <script src="Assets/javascript/bootstrap.min.js"></script>
       <script src="https://cdn.jsdelivr.net/npm/moment@^2"></script>
       <script src="Assets/javascript/chart.umd.js"></script>
       <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8"></script>
       <script src="Assets/javascript/chartjs-plugin-zoom.js"></script>
       <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-moment"></script>
       <script src="https://unpkg.com/popper.js@1/dist/umd/popper.min.js"></script>
       <script src="Assets/javascript/jquery.pjax.js"></script>  

       <script src="https://unpkg.com/js-year-calendar@latest/dist/js-year-calendar.min.js"></script>
       <script src="https://unpkg.com/js-year-calendar@latest/locales/js-year-calendar.zh-TW.js"></script>
       <script src="https://unpkg.com/tippy.js@4"></script>
    <script> //moment.js轉中文
      moment.locale('zh-tw', {
          months: '一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月'.split('_'),
          monthsShort: '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
          weekdays: '星期日_星期一_星期二_星期三_星期四_星期五_星期六'.split('_'),
          weekdaysShort: '周日_周一_周二_周三_周四_周五_周六'.split('_'),
          weekdaysMin: '日_一_二_三_四_五_六'.split('_'),
          longDateFormat: {
            LT: 'Ah點mm分',
            LTS: 'Ah點m分s秒',
            L: 'YYYY-MM-DD',
            LL: 'YYYY年MMMD日',
            LLL: 'YYYY年MMMD日Ah點mm分',
            LLLL: 'YYYY年MMMD日ddddAh點mm分',
            l: 'YYYY-MM-DD',
            ll: 'YYYY年MMMD日',
            lll: 'YYYY年MMMD日Ah點mm分',
            llll: 'YYYY年MMMD日ddddAh點mm分'
          },
          meridiemParse: /凌晨|早上|上午|中午|下午|晚上/,
          meridiemHour: function (h, meridiem) {
            let hour = h;
            if (hour === 12) {
              hour = 0;
            }
            if (meridiem === '凌晨' || meridiem === '早上' ||
              meridiem === '上午') {
              return hour;
            } else if (meridiem === '下午' || meridiem === '晚上') {
              return hour + 12;
            } else {
              // '中午'
              return hour >= 11 ? hour : hour + 12;
            }
          },
          meridiem: function (hour, minute, isLower) {
            const hm = hour * 100 + minute;
            if (hm < 600) {
              return '凌晨';
            } else if (hm < 900) {
              return '早上';
            } else if (hm < 1130) {
              return '上午';
            } else if (hm < 1230) {
              return '中午';
            } else if (hm < 1800) {
              return '下午';
            } else {
              return '晚上';
            }
          },
          calendar: {
            sameDay: function () {
              return this.minutes() === 0 ? '[今天]Ah[點整]' : '[今天]LT';
            },
            nextDay: function () {
              return this.minutes() === 0 ? '[明天]Ah[點整]' : '[明天]LT';
            },
            lastDay: function () {
              return this.minutes() === 0 ? '[昨天]Ah[點整]' : '[昨天]LT';
            },
            nextWeek: function () {
              let startOfWeek, prefix;
              startOfWeek = moment().startOf('week');
              prefix = this.diff(startOfWeek, 'days') >= 7 ? '[下]' : '[本]';
              return this.minutes() === 0 ? prefix + 'dddA點整' : prefix + 'dddAh點mm';
            },
            lastWeek: function () {
              let startOfWeek, prefix;
              startOfWeek = moment().startOf('week');
              prefix = this.unix() < startOfWeek.unix() ? '[上]' : '[本]';
              return this.minutes() === 0 ? prefix + 'dddAh點整' : prefix + 'dddAh點mm';
            },
            sameElse: 'LL'
          },
          ordinalParse: /\d{1,2}(日|月|周)/,
          ordinal: function (number, period) {
            switch (period) {
              case 'd':
              case 'D':
              case 'DDD':
                return number + '日';
              case 'M':
                return number + '月';
              case 'w':
              case 'W':
                return number + '周';
              default:
                return number;
            }
          },
          relativeTime: {
            future: '%s内',
            past: '%s前',
            s: '幾秒',
            m: '1 分鐘',
            mm: '%d 分鐘',
            h: '1 小時',
            hh: '%d 小時',
            d: '1 天',
            dd: '%d 天',
            M: '1 個月',
            MM: '%d 个月',
            y: '1 年',
            yy: '%d 年'
          },
          week: {
            // GB/T 7408-1994《数据元和交换格式·信息交换·日期和时间表示法》与ISO 8601:1988等效
            dow: 1, // Monday is the first day of the week.
            doy: 4  // The week that contains Jan 4th is the first week of the year.
          }
        });</script>
    
      <script>
        $(document).ready(function(){
          var winHeight = window.innerHeight;
        window.addEventListener('resize', function(event){
            winHeight = window.innerHeight;
            if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){
        // true for mobile device
          $('.content-body').css("height",`calc(${winHeight}px - ${nav_height}px`);
           }
        });
          var nav_height = $('#nav').outerHeight();
        var content_height = $('.content-body').innerHeight();
    
        if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){
        // true for mobile device
        $('.content-body').css("height",`calc(${winHeight}px - ${nav_height}px`);
        }else{
          // false for not mobile device
          $('.content-body').css("height",`calc(100vh`);
        }
                 
      });
    </script>
    </head>
    <body>
      <nav id="nav" class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <a class="navbar-brand d-lg-none" data-url="index.html" href="#"><img src="Assets/image/logo.png"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
    
        <div class="collapse navbar-collapse" id="navbarColor01">
          <ul class="navbar-nav mx-auto position-relative">
            <li class="nav-item">
              <a class="nav-link" href="#">未來UI設計</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="index.html" data-pjax>資訊圖表中心</a>
              </li>
            <a class="middle-logo d-none d-lg-block"  href="index.html" data-pjax><img src="Assets/image/logo.png"></a>
            <li class="nav-item">
              <a class="nav-link" href="#">低成本三王</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">3D Modal</a>
            </li>
          </ul>
        </div>
      </nav>
      <div id="container">
        <div class="index p-1" style="display: none;">

        </div>
        <div class="content-body p-1">
  <div class="d-flex">
      <div class="d-flex flex-column text-center" style="min-width:150px;color:#f1f1f1;">
                  <div class="w-100 d-flex flex-column justify-content-center p-1">
                    <div class="d-flex flex-column align-items-center justify-content-center" style="height: 150px;background-color:rgba(63, 89, 102, 0.21);">
                        <span id="normal" style="font-size:2em;">0</span>
                        <span>正常<span style="font-size: 0.8em;">(次)</span></span>
                    </div>
                  </div>
                  <div class="w-100 d-flex flex-column justify-content-center p-1">
                    <div class="d-flex flex-column align-items-center justify-content-center" style="height: 150px;background-color:rgba(63, 89, 102, 0.21);">
                        <span id="temp" style="font-size:2em;">0</span>
                        <span>臨時<span style="font-size: 0.8em;">(次)</span></span>
                    </div>
                </div>
                <div class="w-100 d-flex flex-column justify-content-center p-1">
                    <div class="d-flex flex-column align-items-center justify-content-center" style="height: 150px;background-color:rgba(63, 89, 102, 0.21);">
                        <span id="delay" style="font-size:2em;">0</span>
                        <span>延後<span style="font-size: 0.8em;">(次)</span></span> 
                    </div>
                </div>
      </div>
    <div id="calendar"></div>
  </div>
  </div>

  <link rel="stylesheet" type="text/css" href="https://unpkg.com/js-year-calendar@latest/dist/js-year-calendar.min.css" />

  <style>
      #calendar{width:100%;color:var(--main-text-color);overflow:unset;background-color: #141c1e69;}
      .tippy-tooltip{background-color:#f1f1f1;}
      .month-container{padding: 10px 4px !important;}
      .calendar .calendar-spinner > div{background-color:#f1f1f1;}
  </style>
  

<script>
    var number_array = [];
    let tooltip = null;
    // dataSource json use fetch api
    let dataSource =  function({year}) {
    return fetch('Assets/json/maintain.json')
      .then(result => result.json())
      .then(result => {
        if (result.items) {
          return result.items.map(r => ({
            startDate: new Date(r.date),
            endDate: new Date(r.date),
            name: r.status,
            color:r.color,
            details: r.special
          }));
        }
        return [];  
      });
    }
    const calendar = new Calendar('#calendar', {
    language: 'zh-TW',
    dataSource: dataSource,
    mouseOnDay: function(e) {
    if (e.events.length > 0) {
      var content = '';
      for (var i in e.events) {
          if(e.events[i].details ==undefined){
            e.events[i].details = "";
          }
        content += '<div class="event-tooltip-content">'
          + '<div class="event-name" style="color:' + e.events[i].color + '">' + e.events[i].name + '</div>' + '<div class="event-details" style="color:' + e.events[i].color + '">' + e.events[i].details + '</div>'+ '</div>';
      }
      
      if (tooltip !== null) {
        tooltip.destroy();
        tooltip = null;
      }
      
      tooltip = tippy(e.element, {
          placement: 'right',
          content: content,
          animateFill: false,
          animation: 'shift-away',
          arrow: true
      });
      tooltip.show();
    }
  },
  mouseOutDay: function() {
    if (tooltip !== null) {
      tooltip.destroy();
      tooltip = null;
    }
  }
});

    var today = new Date();
    var thisyear =  today.getFullYear();
    $.getJSON("Assets/json/maintain.json", function(json_file) {
        var n1 = 0;
        var t1 = 0;
        var d1 = 0;
        var z = 0;
        for(var i = 0 ;i < json_file.items.length; i++){
          var inside_array = [];
          //如果資料讀到前一年 或最後一筆 就統計
          if ((new Date(json_file.items[i].date)).getFullYear() != thisyear - z || i == json_file.items.length - 1){
            z++;
            inside_array.push(n1,t1,d1);
            number_array.push(inside_array);
            n1 = 0;
            t1 = 0;
            d1 = 0;
          }
            //如果資料年份 = 今年 然後分類
            if ((new Date(json_file.items[i].date)).getFullYear() == thisyear - z){
                if(json_file.items[i].normal_maintain==1){
                    n1+=1;
                }
                else if(json_file.items[i].temporary_maintain==1){
                    t1+=1;
                }
                else{
                    d1+=1;
                }
            }
        }
        $("#normal").text(number_array[0][0]);
        $("#temp").text(number_array[0][1]);
        $("#delay").text(number_array[0][2]);
    });
    document.querySelector('#calendar').addEventListener('yearChanged', function(e) {
        //選到目前年份
        var x = thisyear - e.currentYear;
        //只到2019
        if(x <=3 && x >=0){
          $("#normal").text(number_array[x][0]);
          $("#temp").text(number_array[x][1]);
          $("#delay").text(number_array[x][2]);
        }
        else{
          $("#normal").text(0);
          $("#temp").text(0);
          $("#delay").text(0);
        }
        
    })

</script>
  </div>
  </body>
  <script>
    if ($.support.pjax) {
    $(document).on('click', 'a[data-pjax]', function(event) {
      console.log("first");
      var page_path = $(this).attr('href');
          if(page_path == 'index.html'){
            var x = (Number(moment().format('MM')) + Number(moment().format('D'))) * 5;
            var binary = ((x >>> 0).toString(2)).padStart(8,'0');
            $("#password").text(binary);
          }
          else if (page_path == 'server_temporary.html'){
            $.getScript("Assets/javascript/js-year-calendar.min.js");
            $.getScript("Assets/javascript/js-year-calendar.zh-TW.js");
            $.getScript("Assets/javascript/tippy.js");
          }
          else if(page_path == 'Official_Activity.html'){
            $.getScript("Assets/javascript/google_chart.js");
          }
          else{
            return;
          }  
    });
    $(document).on('ready pjax:success', function(event) {
      console.log("later");
        $(document).pjax('[data-pjax] a, a[data-pjax]', '#container',{ fragment: '#container' });
    })
  }
  </script>
  </html>
  